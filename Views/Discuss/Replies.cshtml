@model Project.Models.Discuss

@{
    Layout = "_Layout";
}

<div class="bg-white p-2">
    <div class="border rounded col-12 mb-0 d-flex p-2 justify-content-between align-items-center">
        <div class="col-12 p-2">
            <div class="col-12 text-center">
                <h4 class="tlarge mb-0">@Model.Name</h4>
            </div>
            <p class="col-12 mb-2 tbg-desc">
                @Model.Name
            </p>
            <p class="tsmall mb-0">
                <span>
                    <svg data-toggle="tooltip" data-placement="bottom" title="Ответов" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="black" class="bi bi-chat-right" viewBox="0 0 16 16">
                        <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z" />
                    </svg>
                    <span class="ps-1">@Model.Replies.Count()</span>
                </span>
                @if (Model.Tags.Count() > 0)
                {
            <span class="tverysmall ms-2">
                <svg data-toggle="tooltip" data-placement="bottom" title="Касается следующих тем" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="black" class="bi bi-tag" viewBox="0 0 16 16">
                    <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z" />
                    <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z" />
                </svg>
                @foreach (var tag in Model.Tags)
                {
                    <span class="ps-1">@tag.Name</span>
                }
            </span>
                }
            </p>
        </div>
    </div>
    <section>
        <div class="mb-2 mt-0 rounded d-flex col-12 p-3 ps-0">
            <form asp-action="AddReply" asp-controller="discuss" method="post" class="col-12">
                <div class="col-sm-8 col-10">
                    <input hidden name="discussId" value="@Model.Id"/>
                    <textarea name="replyContent" class="form-control form-control-sm" placeholder="Написать ответ на обсуждение"></textarea>
                </div>
                <button type="submit" class="btn btn-submit m-2">Ответить</button>
            </form>
        </div>
    </section>
    <div class="col-12 mt-4 text-center">
        <h4 class="tbig">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-chat-quote-fill" viewBox="0 0 16 16">
                <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM7.194 6.766a1.688 1.688 0 0 0-.227-.272 1.467 1.467 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 5.734 6C4.776 6 4 6.746 4 7.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.461 2.461 0 0 0-.227-.4zM11 9.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.466 2.466 0 0 0-.228-.4 1.686 1.686 0 0 0-.227-.273 1.466 1.466 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 10.07 6c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z" />
            </svg>
            Последние ответы
        </h4>
    </div>
    <div class="col-12 mt-2 p-2 pb-0 border rounded bg-light">
        <section>
            @await Component.InvokeAsync("ReplyList") 
        </section>
    </div>
</div>